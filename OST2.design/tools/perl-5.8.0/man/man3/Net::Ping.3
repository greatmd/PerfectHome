.\" Automatically generated by Pod::Man v1.34, Pod::Parser v1.13
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  | will give a
.\" real vertical bar.  \*(C+ will give a nicer C++.  Capital omega is used to
.\" do unbreakable dashes and therefore won't be available.  \*(C` and \*(C'
.\" expand to `' in nroff, nothing in troff, for use with C<>.
.tr \(*W-|\(bv\*(Tr
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.if \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.\"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.hy 0
.if n .na
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "Net::Ping 3"
.TH Net::Ping 3 "2002-06-01" "perl v5.8.0" "Perl Programmers Reference Guide"
.SH "NAME"
Net::Ping \- check a remote host for reachability
.PP
$Id: Ping.pm,v 1.6 2002/06/19 15:23:48 rob Exp $
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
.Vb 1
\&    use Net::Ping;
.Ve
.PP
.Vb 3
\&    $p = Net::Ping->new();
\&    print "$host is alive.\en" if $p->ping($host);
\&    $p->close();
.Ve
.PP
.Vb 10
\&    $p = Net::Ping->new("icmp");
\&    $p->bind($my_addr); # Specify source interface of pings
\&    foreach $host (@host_array)
\&    {
\&        print "$host is ";
\&        print "NOT " unless $p->ping($host, 2);
\&        print "reachable.\en";
\&        sleep(1);
\&    }
\&    $p->close();
.Ve
.PP
.Vb 10
\&    $p = Net::Ping->new("tcp", 2);
\&    # Try connecting to the www port instead of the echo port
\&    $p->{port_num} = getservbyname("http", "tcp");
\&    while ($stop_time > time())
\&    {
\&        print "$host not reachable ", scalar(localtime()), "\en"
\&            unless $p->ping($host);
\&        sleep(300);
\&    }
\&    undef($p);
.Ve
.PP
.Vb 7
\&    # High precision syntax (requires Time::HiRes)
\&    $p = Net::Ping->new();
\&    $p->hires();
\&    ($ret, $duration, $ip) = $p->ping($host, 5.5);
\&    printf("$host [ip: $ip] is alive (packet return time: %.2f ms)\en", 1000 * $duration)
\&      if $ret;
\&    $p->close();
.Ve
.PP
.Vb 2
\&    # For backward compatibility
\&    print "$host is alive.\en" if pingecho($host);
.Ve
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
This module contains methods to test the reachability of remote
hosts on a network.  A ping object is first created with optional
parameters, a variable number of hosts may be pinged multiple
times and then the connection is closed.
.PP
You may choose one of four different protocols to use for the
ping. The \*(L"udp\*(R" protocol is the default. Note that a live remote host
may still fail to be pingable by one or more of these protocols. For
example, www.microsoft.com is generally alive but not pingable.
.PP
With the \*(L"tcp\*(R" protocol the \fIping()\fR method attempts to establish a
connection to the remote host's echo port.  If the connection is
successfully established, the remote host is considered reachable.  No
data is actually echoed.  This protocol does not require any special
privileges but has higher overhead than the other two protocols.
.PP
Specifying the \*(L"udp\*(R" protocol causes the \fIping()\fR method to send a udp
packet to the remote host's echo port.  If the echoed packet is
received from the remote host and the received packet contains the
same data as the packet that was sent, the remote host is considered
reachable.  This protocol does not require any special privileges.
It should be borne in mind that, for a udp ping, a host
will be reported as unreachable if it is not running the
appropriate echo service.  For Unix-like systems see \fIinetd\fR\|(8)
for more information.
.PP
If the \*(L"icmp\*(R" protocol is specified, the \fIping()\fR method sends an icmp
echo message to the remote host, which is what the \s-1UNIX\s0 ping program
does.  If the echoed message is received from the remote host and
the echoed information is correct, the remote host is considered
reachable.  Specifying the \*(L"icmp\*(R" protocol requires that the program
be run as root or that the program be setuid to root.
.PP
If the \*(L"external\*(R" protocol is specified, the \fIping()\fR method attempts to
use the \f(CW\*(C`Net::Ping::External\*(C'\fR module to ping the remote host.
\&\f(CW\*(C`Net::Ping::External\*(C'\fR interfaces with your system's default \f(CW\*(C`ping\*(C'\fR
utility to perform the ping, and generally produces relatively
accurate results. If \f(CW\*(C`Net::Ping::External\*(C'\fR if not installed on your
system, specifying the \*(L"external\*(R" protocol will result in an error.
.Sh "Functions"
.IX Subsection "Functions"
.ie n .IP "Net::Ping\->new([$proto [, $def_timeout\fR [, \f(CW$bytes]]]);" 4
.el .IP "Net::Ping\->new([$proto [, \f(CW$def_timeout\fR [, \f(CW$bytes\fR]]]);" 4
.IX Item "Net::Ping->new([$proto [, $def_timeout [, $bytes]]]);"
Create a new ping object.  All of the parameters are optional.  \f(CW$proto\fR
specifies the protocol to use when doing a ping.  The current choices
are \*(L"tcp\*(R", \*(L"udp\*(R" or \*(L"icmp\*(R".  The default is \*(L"udp\*(R".
.Sp
If a default timeout ($def_timeout) in seconds is provided, it is used
when a timeout is not given to the \fIping()\fR method (below).  The timeout
must be greater than 0 and the default, if not specified, is 5 seconds.
.Sp
If the number of data bytes ($bytes) is given, that many data bytes
are included in the ping packet sent to the remote host. The number of
data bytes is ignored if the protocol is \*(L"tcp\*(R".  The minimum (and
default) number of data bytes is 1 if the protocol is \*(L"udp\*(R" and 0
otherwise.  The maximum number of data bytes that can be specified is
1024.
.ie n .IP "$p\->ping($host [, $timeout]);" 4
.el .IP "$p\->ping($host [, \f(CW$timeout\fR]);" 4
.IX Item "$p->ping($host [, $timeout]);"
Ping the remote host and wait for a response.  \f(CW$host\fR can be either the
hostname or the \s-1IP\s0 number of the remote host.  The optional timeout
must be greater than 0 seconds and defaults to whatever was specified
when the ping object was created.  Returns a success flag.  If the
hostname cannot be found or there is a problem with the \s-1IP\s0 number, the
success flag returned will be undef.  Otherwise, the success flag will
be 1 if the host is reachable and 0 if it is not.  For most practical
purposes, undef and 0 and can be treated as the same case.  In array
context, the elapsed time is also returned.  The elapsed time value will
be a float, as retuned by the \fITime::HiRes::time()\fR function, if \fIhires()\fR
has been previously called, otherwise it is returned as an integer.
.IP "$p\->source_verify( { 0 | 1 } );" 4
.IX Item "$p->source_verify( { 0 | 1 } );"
Allows source endpoint verification to be enabled or disabled.
This is useful for those remote destinations with multiples
interfaces where the response may not originate from the same
endpoint that the original destination endpoint was sent to.
This only affects udp and icmp protocol pings.
.Sp
This is enabled by default.
.IP "$p\->hires( { 0 | 1 } );" 4
.IX Item "$p->hires( { 0 | 1 } );"
Causes this module to use Time::HiRes module, allowing milliseconds
to be returned by subsequent calls to \fIping()\fR.
.Sp
This is disabled by default.
.IP "$p\->bind($local_addr);" 4
.IX Item "$p->bind($local_addr);"
Sets the source address from which pings will be sent.  This must be
the address of one of the interfaces on the local host.  \f(CW$local_addr\fR
may be specified as a hostname or as a text \s-1IP\s0 address such as
\&\*(L"192.168.1.1\*(R".
.Sp
If the protocol is set to \*(L"tcp\*(R", this method may be called any
number of times, and each call to the \fIping()\fR method (below) will use
the most recent \f(CW$local_addr\fR.  If the protocol is \*(L"icmp\*(R" or \*(L"udp\*(R",
then \fIbind()\fR must be called at most once per object, and (if it is
called at all) must be called before the first call to \fIping()\fR for that
object.
.IP "$p\->open($host);" 4
.IX Item "$p->open($host);"
When you are using the stream protocol, this call pre-opens the
tcp socket.  It's only necessary to do this if you want to
provide a different timeout when creating the connection, or
remove the overhead of establishing the connection from the
first ping.  If you don't call \f(CW\*(C`open()\*(C'\fR, the connection is
automatically opened the first time \f(CW\*(C`ping()\*(C'\fR is called.
This call simply does nothing if you are using any protocol other
than stream.
.IP "$p\->\fIclose()\fR;" 4
.IX Item "$p->close();"
Close the network connection for this ping object.  The network
connection is also closed by \*(L"undef \f(CW$p\fR\*(R".  The network connection is
automatically closed if the ping object goes out of scope (e.g. \f(CW$p\fR is
local to a subroutine and you leave the subroutine).
.ie n .IP "pingecho($host [, $timeout]);" 4
.el .IP "pingecho($host [, \f(CW$timeout\fR]);" 4
.IX Item "pingecho($host [, $timeout]);"
To provide backward compatibility with the previous version of
Net::Ping, a \fIpingecho()\fR subroutine is available with the same
functionality as before.  \fIpingecho()\fR uses the tcp protocol.  The
return values and parameters are the same as described for the \fIping()\fR
method.  This subroutine is obsolete and may be removed in a future
version of Net::Ping.
.SH "WARNING"
.IX Header "WARNING"
\&\fIpingecho()\fR or a ping object with the tcp protocol use \fIalarm()\fR to
implement the timeout.  So, don't use \fIalarm()\fR in your program while
you are using \fIpingecho()\fR or a ping object with the tcp protocol.  The
udp and icmp protocols do not use \fIalarm()\fR to implement the timeout.
.SH "NOTES"
.IX Header "NOTES"
There will be less network overhead (and some efficiency in your
program) if you specify either the udp or the icmp protocol.  The tcp
protocol will generate 2.5 times or more traffic for each ping than
either udp or icmp.  If many hosts are pinged frequently, you may wish
to implement a small wait (e.g. 25ms or more) between each ping to
avoid flooding your network with packets.
.PP
The icmp protocol requires that the program be run as root or that it
be setuid to root.  The other protocols do not require special
privileges, but not all network devices implement tcp or udp echo.
.PP
Local hosts should normally respond to pings within milliseconds.
However, on a very congested network it may take up to 3 seconds or
longer to receive an echo packet from the remote host.  If the timeout
is set too low under these conditions, it will appear that the remote
host is not reachable (which is almost the truth).
.PP
Reachability doesn't necessarily mean that the remote host is actually
functioning beyond its ability to echo packets.  tcp is slightly better
at indicating the health of a system than icmp because it uses more
of the networking stack to respond.
.PP
Because of a lack of anything better, this module uses its own
routines to pack and unpack \s-1ICMP\s0 packets.  It would be better for a
separate module to be written which understands all of the different
kinds of \s-1ICMP\s0 packets.
.SH "INSTALL"
.IX Header "INSTALL"
The latest source tree is available via cvs:
.PP
.Vb 2
\&  cvs -z3 -q -d :pserver:anonymous@cvs.roobik.com.:/usr/local/cvsroot/freeware co Net-Ping
\&  cd Net-Ping
.Ve
.PP
The tarball can be created as follows:
.PP
.Vb 1
\&  perl Makefile.PL ; make ; make dist
.Ve
.PP
The latest Net::Ping release can be found at \s-1CPAN:\s0
.PP
.Vb 1
\&  $CPAN/modules/by-module/Net/
.Ve
.PP
1) Extract the tarball
.PP
.Vb 2
\&  gtar -zxvf Net-Ping-xxxx.tar.gz
\&  cd Net-Ping-xxxx
.Ve
.PP
2) Build:
.PP
.Vb 4
\&  make realclean
\&  perl Makefile.PL
\&  make
\&  make test
.Ve
.PP
3) Install
.PP
.Vb 1
\&  make install
.Ve
.PP
Or install it \s-1RPM\s0 Style:
.PP
.Vb 1
\&  rpm -ta SOURCES/Net-Ping-xxxx.tar.gz
.Ve
.PP
.Vb 1
\&  rpm -ih RPMS/noarch/perl-Net-Ping-xxxx.rpm
.Ve
.SH "AUTHORS"
.IX Header "AUTHORS"
.Vb 2
\&  Current maintainer:
\&    bbb@cpan.org (Rob Brown)
.Ve
.PP
.Vb 2
\&  External protocol:
\&    colinm@cpan.org (Colin McMillen)
.Ve
.PP
.Vb 2
\&  Stream protocol:
\&    bronson@trestle.com (Scott Bronson)
.Ve
.PP
.Vb 3
\&  Original pingecho():
\&    karrer@bernina.ethz.ch (Andreas Karrer)
\&    pmarquess@bfsec.bt.co.uk (Paul Marquess)
.Ve
.PP
.Vb 2
\&  Original Net::Ping author:
\&    mose@ns.ccsn.edu (Russell Mosemann)
.Ve
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright (c) 2002, Rob Brown.  All rights reserved.
.PP
Copyright (c) 2001, Colin McMillen.  All rights reserved.
.PP
This program is free software; you may redistribute it and/or
modify it under the same terms as Perl itself.
